"use strict";(self.webpackChunkUI=self.webpackChunkUI||[]).push([[672],{516:(v,g,r)=>{r.r(g),r.d(g,{PictureComponent:()=>p});var a=r(895);const C_baseURL="https://root-few-vegetable.glitch.me/";var i=r(256);const f=["imgElement"];function h(n,e){if(1&n&&i._UZ(0,"img",2,3),2&n){const t=i.oxw();i.Q6J("src",t.img.fullpath,i.LSH)}}class d{constructor(){this.deleteImgId=new i.vpe}copyToClipboard(){const e=this.selectedImage.nativeElement;e.crossOrigin="anonymous",e.onload=()=>{const t=document.createElement("canvas");t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t.toBlob(s=>{navigator.clipboard.write([new ClipboardItem({[s.type]:s})])},e.type)}}deleteImg(e){this.deleteImgId.emit(e)}}d.\u0275fac=function(e){return new(e||d)},d.\u0275cmp=i.Xpm({type:d,selectors:[["app-image"]],viewQuery:function(e,t){if(1&e&&i.Gf(f,5),2&e){let o;i.iGM(o=i.CRH())&&(t.selectedImage=o.first)}},inputs:{img:"img"},outputs:{deleteImgId:"deleteImgId"},standalone:!0,features:[i.jDz],decls:5,vars:1,consts:[[3,"src",4,"ngIf"],[3,"click"],[3,"src"],["imgElement",""]],template:function(e,t){1&e&&(i.YNc(0,h,2,1,"img",0),i.TgZ(1,"button",1),i.NdJ("click",function(){return t.copyToClipboard()}),i._uU(2,"Copy Image"),i.qZA(),i.TgZ(3,"button",1),i.NdJ("click",function(){return t.deleteImg(t.img.imgName)}),i._uU(4,"delete"),i.qZA()),2&e&&i.Q6J("ngIf",t.img)},dependencies:[a.ez,a.O5]});const m={upload:C_baseURL+"/upload",list:C_baseURL+"/list",delete:C_baseURL+"/delete/<PATH>"};var _=r(529);class c{constructor(e){this.http=e}addImagesToNode(e){return this.http.post(m.upload,e)}getImages(){return this.http.get(m.list)}deleteImgFromNode(e){return this.http.delete(m.delete.replace("<PATH>",e))}}c.\u0275fac=function(e){return new(e||c)(i.LFG(_.eN))},c.\u0275prov=i.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"});class y{constructor(e,t){this._document=t;const o=this._textarea=this._document.createElement("textarea"),s=o.style;s.position="fixed",s.top=s.opacity="0",s.left="-999em",o.setAttribute("aria-hidden","true"),o.value=e,o.readOnly=!0,this._document.body.appendChild(o)}copy(){const e=this._textarea;let t=!1;try{if(e){const o=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),t=this._document.execCommand("copy"),o&&o.focus()}}catch{}return t}destroy(){const e=this._textarea;e&&(e.remove(),this._textarea=void 0)}}let b=(()=>{class n{constructor(t){this._document=t}copy(t){const o=this.beginCopy(t),s=o.copy();return o.destroy(),s}beginCopy(t){return new y(t,this._document)}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(a.K0))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function I(n,e){if(1&n){const t=i.EpF();i.TgZ(0,"div",2)(1,"app-image",3),i.NdJ("deleteImgId",function(s){i.CHM(t);const l=i.oxw();return i.KtG(l.deleteImg(s))}),i.qZA()()}if(2&n){const t=e.$implicit;i.xp6(1),i.Q6J("img",t)}}class p{onPaste(e){const t=e.clipboardData||window.clipboardData,s=Array.from(t.items).find(l=>/image/i.test(l.type));s&&this.saveFile(s.getAsFile())}constructor(e,t){this.pictureService=e,this.clipboard=t,this.imagesLists=[]}ngOnInit(){this.fetchImgs()}onFileSelected(e){const t=e.target.files[0];this.saveFile(t);const o=new FileReader;o.readAsDataURL(t),o.onload=()=>{this.imageSrc=o.result}}addFormData(e){const t=new FormData;return t.append("image",e),t}fetchImgs(){this.pictureService.getImages().subscribe(e=>{this.imagesLists=e.map(t=>({fullpath:C_baseURL+"/file/"+t,imgName:t}))})}saveFile(e){this.pictureService.addImagesToNode(this.addFormData(e)).subscribe(t=>{this.fetchImgs()})}deleteImg(e){this.pictureService.deleteImgFromNode(e).subscribe(t=>{this.fetchImgs()})}}p.\u0275fac=function(e){return new(e||p)(i.Y36(c),i.Y36(b))},p.\u0275cmp=i.Xpm({type:p,selectors:[["app-picture"]],hostBindings:function(e,t){1&e&&i.NdJ("paste",function(s){return t.onPaste(s)})},standalone:!0,features:[i.jDz],decls:2,vars:1,consts:[["type","file",3,"change"],["class","p-5",4,"ngFor","ngForOf"],[1,"p-5"],[3,"img","deleteImgId"]],template:function(e,t){1&e&&(i.TgZ(0,"input",0),i.NdJ("change",function(s){return t.onFileSelected(s)}),i.qZA(),i.YNc(1,I,2,1,"div",1)),2&e&&(i.xp6(1),i.Q6J("ngForOf",t.imagesLists))},dependencies:[a.ez,a.sg,d],styles:[".p-5[_ngcontent-%COMP%]{padding:5px}"]})}}]);